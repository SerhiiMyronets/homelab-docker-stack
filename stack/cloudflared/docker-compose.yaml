services:
  cloudflared:
    image: cloudflare/cloudflared:latest
    container_name: cloudflared
    command: tunnel run
    volumes:
      - ./cloudflared/config.yml:/etc/cloudflared/config.yml:ro
      - /mnt/data/secrets/cloudflared/credentials.json:/etc/cloudflared/credentials.json:ro
    depends_on: [vault]
    restart: unless-stopped
    networks:
      - vault_net
      - torrents_edge

networks:
  vault_net:
    external: true
  torrents_edge:
    external: true